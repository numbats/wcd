---
title: 'ETC5512: Tutorial 2 Solution'
author: "Di Cook"
date: "Week 2"
output: 
  html_document:
    css: tutorial.css
---
  
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, 
                      cache=TRUE, 
                      warning=FALSE, 
                      message=FALSE)
options(width=80,digits=3)
```

```{r loadpackages}
library(tidyverse)
library(here)
library(ALA4R)
```


# Tutorial Solution

## Exercise 1: US air traffic

### a. Download

### b. How was the data collected?

  (i) Who has the oversight for the data provision? 
  
  *Office of Airline Information, Bureau of Transportation Statistics*
  
  (ii) Who reports the data to the data provider? 
  
  *Reporting carriers are required to (or voluntarily) report on-time data for flights they operate*
  
  (iii) What type of data collection is this? (e.g. experimental or observational? Survey sampling?) 
  
  *This is observational data, but it is a complete set of data, like a census for all `US certified air carriers that account for at least one percent of domestic scheduled passenger revenues`.*
  
  (iv) Is this open data? What type of license is provided? What are you allowed to do with the data? 
  
  *Yes, this is open data. There is no obvious license, but it falls under the US open data policy guidelines. Check the Web policies link at bottom.*
  
  (v) What information is in each row of the data set? 
  
  *One row is one operated flight. You can think of this as event data. Ususally you will want to aggregate it in different ways for analysis.*
  
### c. Data quality checks

(i) Read in the data
(ii) Check dates range for the month of January 2020.
(iii) Count number of flights by carrier. Who has the most flights?
(iv) Which airport has the most traffic? Does every airport have the same number of incoming and outgoing flights?

```{r}
library(tidyverse)
library(here)
flights <- read_csv(here::here("data/994615142_T_ONTIME_REPORTING 3.csv"))
flights %>% select(FL_DATE) %>% summary()
flights %>% count(OP_CARRIER, sort = TRUE)
```

*WN has the largest number of flights. This is the low cost carrier Southwest.*

```{r}
outgoing <- flights %>% count(ORIGIN) %>% rename(outbound = n)
incoming <- flights %>% count(DEST) %>% rename(inbound = n)
traffic <- full_join(outgoing, incoming, by=c("ORIGIN" = "DEST"))
ggplot(traffic, aes(x=outbound, y=inbound)) + geom_point() +
  coord_equal()
```  

*The number of outgoing flights is the same (or very close to) as the number of incoming flights, as we would expect.*

## Exercise 2: National Longitudinal Survey of Youth

### a. Data download

(iv) The data arrives with four variables `R0000100`, `R0173600`, `R0214700`, `R0214800`. Check the codebook to find out what these are.

*R0000100 is a unique id for each individual, R0173600 is a sex and race survey question with values from 1-20,  R0214700 is race with 3 categories,  R0214800 is sex with only two categories.*

### b. License and usage

(i) At the bottom of the web site are links that can help to determine what are the allowed uses. What information does the data provider keep about you?  

*Only your email address.*

(ii) Is there a license provided with the data? What sort of open data is this? The documentation says that this is public use data. What do you think "public use" means? 

*https://www.data.gov/privacy-policy#license says "U.S. Federal data available through Data.gov is offered free and without restriction."*

### c. About the data

(i) What type of data is this? (e.g. experimental or observational? Survey sampling?)

*Observational data collected by survey sampling: "a cross-sectional sample of 6,111 respondents designed to represent the noninstitutionalized civilian segment of people living in the United States in 1979 and born between January 1, 1957, and December 31, 1964 (ages 14-21 as of December 31, 1978)"*

(ii) Check the levels in the downloaded data. Do they match the codebook? How many individuals are in the sample?

```{r}
nlsy <- read_csv(here::here("data/NLSY/NLSY.csv"))
nlsy %>% count(R0214700)
nlsy %>% count(R0214800)
nlsy %>% count(R0173600)
nlsy %>% tally()
```

## Exercise 3: Atlas of Living Australia

(i) Point your browser to https://www.ala.org.au. Check the terms of use. Does it have a license? 

*Yes, creative commons.*

(ii) Using the `ALA4R` library, and the function `occurrences` extract the records for platypus. 
(iii) Plot the locations of sightings.
(iv) What dates of sightings are downloaded?
(v) What is the extent of the missing values? Particularly in data and location variables?

```{r eval=FALSE}
library(ALA4R)
platypus <- occurrences("genus:Platypus", email = "YOUR EMAIL HERE")
platy_d <- platypus$data
ggplot(platy_d, aes(x=longitude, y=latitude)) +
  geom_point()
platy_d %>% select(eventDate) %>% summary()
```

(v) What type of data collection is this? (e.g. experimental or observational? Survey sampling?) 

*This is observational data. It is provided on a voluntary basis, some by researchers, some by citizen scientists.*


##### Â© Copyright 2021 Monash University
