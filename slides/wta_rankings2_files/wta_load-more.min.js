"use strict";var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],o=!0,n=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);o=!0);}catch(e){n=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(n)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};!function(a,e,t){var r=Object.freeze({root:null,rootMargin:"0px",threshold:.5}),o="u-hide";a.InfiniteScrollWidget=function(e,t){var r=this;try{var o=e.getAttribute("data-content-types"),n={language:e.getAttribute("data-language"),page:e.getAttribute("data-page"),pageSizeLoadMore:e.getAttribute("data-page-size-loadmore"),pageSize:e.getAttribute("data-page-size"),defaultTags:e.getAttribute("data-tags"),references:e.getAttribute("data-references"),playlistTypeRestriction:e.getAttribute("data-playlist-restriction"),contentTypes:o?o.split(","):null};r.loadMore=new a.LoadMore(n)}catch(e){r.loadMore=function(){},console.error("Unable to load loadMore config",e)}r.container=e,r.template=e.getAttribute("data-template"),r.observableContainer=e,r.observableElement=r.observableContainer.querySelector(".js-init-infinity-scroll"),r.showMoreButton=r.observableContainer.querySelector(".js-show-more-button"),r.loader=r.observableContainer.querySelector(".js-loader"),r.render=t,r.start()},a.InfiniteScrollWidget.prototype.handleCallback=function(e){void 0!==e.content&&0<e.content.length&&this.render(e.content),e.pageInfo.page+1>=e.pageInfo.numPages&&this.stop()},a.InfiniteScrollWidget.prototype.makeObservableListener=function(){var t=this;t.observer=new IntersectionObserver(function(e){_slicedToArray(e,1)[0].isIntersecting&&t.makeRequest()},r),t.observer.observe(t.observableElement)},a.InfiniteScrollWidget.prototype.stop=function(){this.observer.disconnect(),this.observableElement.classList.add(o)},a.InfiniteScrollWidget.prototype.start=function(){var e=this;e.makeObservableListener(),e.showMoreButton&&e.showMoreButton.classList.add(o),e.observableElement.classList.remove(o),e.loader.classList.remove(o)},a.InfiniteScrollWidget.prototype.makeRequest=function(){var e=this;e.loadMore.getContent(e.handleCallback.bind(e))},document.dispatchEvent(new Event(t.CONSTANTS.InfiniteScrollWidget.READY))}(PULSE.app,PULSE.core,PULSE.app.common);